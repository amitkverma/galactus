all:
  vars:
    ansible_connection: ssh
    netdata_uuid: '4035023a-a53c-4053-93e0-f7b00f103490'
    netdata_master_ip: '178.128.72.107' # Netdata floating IP
    deny_default_user: 'ubuntu'
    prod_consul_datacenter: 'DO-BLR'
    prod_consul_domain: 'charcoaleats'
    consul_server_ip: '139.59.79.222' # Consul Private IP
    redis_password: 473d67d08db4314ef0366d2504e37e9f44168abe
    redis_deepstream_port: 6363
    redis_deepstream_server: '159.89.172.11'
    deepstream_websocket_port_lb: 443
    deepstream_websocket_ip_lb: 159.89.163.173
    deepstream_http_port: 8787
    deepstream_websocket_port: 5757
    pm2_user: root
    nodejs_application_port: 8888
    node_application_user: scylla
    deepstream_auth_url: https://dev.charcoaleats.com/dashboard/open/live/authenticateUser
    git_host: gitlab.charcoalbiryani.com
    nodejs_install_npm_user: root
    env_host_name: dev.charcoaleats.com
    nodejs_cpo_port: 8001
    nodejs_api_port: 8888
    mysql_replication_master: '52.194.205.240'
    admin_user: driger
    users:
      - name: "driger" # Ansible User
        groups:
          - sudo
        keys:
          - "{{ lookup('file', '/Users/amitverma/Projects/side-projects/galactus/pub_keys/driger.pub') }}"
      - name: "dragoon" # Admin User 
        groups:
          - sudo
        keys:
          - "{{ lookup('file', '/Users/amitverma/Projects/side-projects/galactus/pub_keys/dragoon.pub') }}"
      - name: "scylla" # Deploy User
        groups:
          - www
        keys:
          - "{{ lookup('file', '/Users/amitverma/Projects/side-projects/galactus/pub_keys/scylla.pub') }}"
    shared_mysql_user: { name: "charcoaleatsAdmin", password: "Striker_Axel01" , host: "%" } 
    proxysql_mysql_monitor: { name: monitor,  password: 'amitkverma' , host: "%" }
    shared_mysql_database: "CB_PROD_MIRROR_DEV"

deepstream_server:
  hosts:
    206.189.142.62:
  vars:
    ansible_ssh_user: root
    netdata_mode: 'slave'
    netdata_monitor_application: ['redis']
    consul_mode: 'client'
    firewall_open_ports: [5757,8300,8301,19999,6363]
    nginx_custom_vhost: netdata
    is_redis_msg_plugin_used: false
    monitor_application_name: 'deepstream'
    deepstream_auth_enable: true


nodejs_server:
  hosts:
    206.189.142.78:
      server_name: 'dev-application-server-1'
    206.189.129.80:
      server_name: 'dev-application-server-2'
  vars:
    ansible_ssh_user: root
    netdata_mode: 'slave'
    netdata_monitor_application: ['nodejs']
    consul_mode: 'client'
    firewall_open_ports: [8888,8300,8301,19999]
    monitor_application_name: 'nodejs'
    health_check_script_enabled: true


redis_cache:
  hosts:
    139.59.41.9:
    206.189.134.69:
  vars:
    ansible_ssh_user: root
    server_name: 'preprod-redis-msg-bus'
    netdata_mode: 'slave'
    netdata_monitor_application: ['redis']
    consul_mode: 'client'
    firewall_open_ports: [8300,8301,19999,6363]
    nginx_custom_vhost: netdata
    redis_port: '{{ redis_deepstream_port }}'
    monitor_application_name: 'redis_msg_bus'
    health_check_script_enabled: true

elk_stack_server:
  hosts:
    139.59.64.86:
  vars:
    ansible_ssh_user: root
    server_name: 'elk-stack'


mysql_server:
  hosts:
    206.189.137.76:
  vars:
    ansible_ssh_user: root
    server_name: 'mysql'


mysql_master: 
  hosts:
    142.93.214.247:
  vars:
    ansible_ssh_user: root
    server_name: 'mysql'
    mysql_bind_address: '{{ mysql_replication_master }}'
    mysql_server_id: 1
    mysql_replication_role: 'master'
    mysql_replication_user: { name: slave_user, host: '%', password: amitkverma }


mysql_slave: 
  hosts:
    54.199.221.170:
    52.194.185.208:
  vars:
    ansible_ssh_user: ubuntu
    server_name: 'mysql'
    mysql_replication_role: 'slave'
    mysql_replication_user: { name: slaveUser, host: '%', password: 'amitkverma' } 
    enable_mysql_slave_replication: true


metabase:
  hosts:
    142.93.220.139:
  vars:
    ansible_ssh_user: root
    metabase_db_pass: amitkverma

mysql_replication: 
  hosts:
    52.194.205.240:
      primary: true
    52.199.15.36:
    13.231.8.202:
  vars:
    ansible_ssh_user: ubuntu
    server_name: 'mysql'
    mysql_group_replication: true
    mysql_group_replication_uuid: "a89aee1a-ea52-11e8-88d0-3611b45eb584"
    mysql_proxysql_backend_config: true

proxysql_server:
  hosts:
    54.250.194.180:
  vars:
    ansible_ssh_user: ubuntu
    server_name: 'mysql'
    shared_multi_primary: true
    shared_require_ssl: false
    shared_private_networking: true

teleport_auth_proxy:
  hosts:
    13.231.154.6:
  vars:
    ansible_ssh_user: ubuntu
    teleport_ssh_enabled: false
    teleport_auth_tokens_node:
      - "4035023a-a53c-4053-93e0-f7b00f103495"

teleport_nodes:
  hosts:
    54.92.50.198:
  vars:
    ansible_ssh_user: ubuntu
    teleport_ssh_enabled: true
    teleport_auth_enabled: false
    teleport_proxy_enabled: false
    teleport_auth_servers:
      - "13.231.154.6"
    teleport_auth_token: "4035023a-a53c-4053-93e0-f7b00f103495"

ipaservers:
  hosts:
    52.199.11.119:
  vars:
    ansible_ssh_user: ubuntu
    ipaserver_hostname: ipa-test.charcoaleats.com
    ipaserver_domain: charcoaleats.com
    ipaserver_realm: CHARCOALEATS.COM
    ipaadmin_password: amitkverma
    ipadm_password: amitkverma
    ipaserver_setup_dns: yes
    ipaserver_auto_forwarders: yes
    ipaserver_allow_zone_overlap: yes
    ipaclient_mkhomedir: yes
    ipaserver_no_ui_redirect: no

ipaclients:
  hosts:
    3.112.46.213:
    # 13.231.155.209:
  vars:
    ansible_ssh_user: ubuntu
    ipaclient_domain: charcoaleats.com
    ipaserver_realm: CHARCOALEATS.COM
    ipaadmin_principal: admin
    ipaadmin_password: amitkverma
    ipaclient_allow_repair: yes
    krb5_packages: krb5-k5tls